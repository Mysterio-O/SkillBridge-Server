model Booking {
  id String @id @default(cuid())

  studentId String
  tutorId   String

  startAt         DateTime
  endAt           DateTime
  timezone        String?
  durationMinutes Int

  hourlyRateSnapshot Decimal @db.Decimal(10, 2)
  totalPrice         Decimal @db.Decimal(10, 2)
  currency           String

  status       BookingStatus @default(pending)
  cancelledBy  CancelledBy?
  cancelReason String?
  completedAt  DateTime?

  topic       String?
  meetingLink String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  student User @relation("BookingStudent", fields: [studentId], references: [id], onDelete: Restrict)
  tutor   User @relation("BookingTutor", fields: [tutorId], references: [id], onDelete: Restrict)

  review Review?

  @@index([studentId])
  @@index([tutorId])
  @@index([status, startAt])
  @@map("bookings")
}
